<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NoxKuu | Digital Art</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@500;700&family=Permanent+Marker&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = { darkMode: 'class' };
    </script>

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            --bg-color: #fdf8f6; --text-color: #57534e; --header-bg: rgba(253, 248, 246, 0.8);
            --border-color: #e7e5e4; --accent-color: #a78bfa; --accent-hover-color: #8b5cf6;
            --inactive-filter-bg: #ffffff; --inactive-filter-hover-bg: #f5f5f4;
            @apply transition-colors duration-300;
        }
        .dark body {
            --bg-color: #1c1917; --text-color: #d6d3d1; --header-bg: rgba(28, 25, 23, 0.8);
            --border-color: #44403c; --accent-hover-color: #c4b5fd; --inactive-filter-bg: #292524;
            --inactive-filter-hover-bg: #44403c;
        }
        .font-heading { font-family: 'Permanent Marker', cursive; }
        .font-body-alt { font-family: 'Caveat', cursive; }
        body { background-color: var(--bg-color); color: var(--text-color); }
        .bg-header { background-color: var(--header-bg); } .border-themed { border-color: var(--border-color); }
        .text-accent { color: var(--accent-color); } .bg-accent { background-color: var(--accent-color); }
        .hover-bg-accent:hover { background-color: var(--accent-hover-color); }
        .bg-inactive-filter { background-color: var(--inactive-filter-bg); }
        .hover-bg-inactive-filter:hover { background-color: var(--inactive-filter-hover-bg); }
        .gallery-masonry { column-gap: 1.5rem; }
        @media (min-width: 640px) { .gallery-masonry { column-count: 2; } }
        @media (min-width: 1024px) { .gallery-masonry { column-count: 3; } }
        .gallery-item { break-inside: avoid; margin-bottom: 1.5rem; }
        .modal-bg { background-color: rgba(253, 248, 246, 0.9); }
        .dark .modal-bg { background-color: rgba(28, 25, 23, 0.9); }
    </style>
</head>
<body class="overflow-x-hidden">

    <!-- HEADER -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-header backdrop-blur-md border-b border-themed">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <a href="#" id="homeLink" class="text-2xl font-bold tracking-wider text-stone-800 dark:text-white font-heading">NOXKUU</a>
            <div class="flex items-center gap-4">
                <button id="theme-toggle" class="p-2 rounded-full text-stone-500 dark:text-stone-400 hover:bg-stone-100 dark:hover:bg-stone-800 focus:outline-none">
                    <svg id="theme-toggle-light-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                    <svg id="theme-toggle-dark-icon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </button>
                <a href="https://forms.gle/your-google-form-link" target="_blank" class="bg-accent hover-bg-accent text-white font-bold py-2 px-4 rounded-lg transition-colors duration-300 font-body-alt text-lg">Suggest a Drawing</a>
            </div>
        </div>
    </header>

    <!-- MAIN CONTENT (Landing Page) -->
    <div id="main-content">
        <main>
            <section class="text-center pt-32 pb-16 md:pt-48 md:pb-24 px-4">
                <div class="z-10">
                    <h1 class="font-heading text-5xl md:text-7xl lg:text-8xl font-bold text-stone-800 dark:text-white tracking-normal">Illustrating Cool Ideas.</h1>
                    <p class="font-body-alt mt-4 text-2xl md:text-3xl text-stone-500 dark:text-stone-400 max-w-2xl mx-auto">A personal collection of whatever seems cool at the moment.</p>
                </div>
            </section>

            <section id="recent-work" class="py-20 md:py-32 bg-white dark:bg-[#111111]">
                <div class="container mx-auto px-6">
                    <h2 class="font-heading text-4xl md:text-5xl font-bold text-center mb-12 text-stone-800 dark:text-white">Recent <span class="text-accent">Work</span></h2>
                    <div id="recent-gallery-container" class="gallery-masonry"></div>
                    <div class="text-center mt-16">
                        <button id="view-full-gallery-btn" class="bg-accent hover-bg-accent text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors duration-300 font-body-alt text-2xl">View Full Gallery</button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- FULL GALLERY PAGE -->
    <div id="gallery-page" class="hidden">
        <section class="py-24 md:py-32">
            <div class="container mx-auto px-6">
                <h2 class="font-heading text-4xl md:text-5xl font-bold text-center mb-4 text-stone-800 dark:text-white">Full <span class="text-accent">Gallery</span></h2>
                <p class="text-center text-stone-500 dark:text-stone-400 mb-12">Filter by universe</p>
                <div id="filter-buttons" class="flex flex-wrap justify-center gap-2 md:gap-4 mb-12"></div>
                <div id="full-gallery-container" class="gallery-masonry"></div>
            </div>
        </section>
    </div>
    
    <!-- FOOTER -->
    <footer id="contact" class="bg-stone-800 dark:bg-black py-12">
        <div class="container mx-auto px-6 text-center text-stone-400">
            <p class="font-heading text-3xl font-bold tracking-wider text-white mb-4">NOXKUU</p>
            <div class="flex justify-center mb-8">
                <a href="https://instagram.com/noxkuuart" target="_blank" class="flex items-center space-x-2 text-stone-300 hover:text-white transition-colors duration-300">
                    <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12.315 2c-4.013 0-4.484.018-6.058.087C4.603 2.158 3.597 2.478 2.78 3.294S1.157 4.6 1.087 6.26c-.07 1.574-.087 2.045-.087 6.058s.018 4.484.087 6.058C1.157 20.097 1.478 21.102 2.294 21.92s1.492 1.134 3.155 1.204C6.83 23.182 7.302 23.2 11.315 23.2s4.484-.018 6.058-.087c1.662-.07 2.668-.39 3.484-1.204s1.134-1.492 1.204-3.155c.07-1.574.087-2.045.087-6.058s-.018-4.484-.087-6.058C23.242 4.603 22.922 3.597 22.106 2.78S21.097 1.478 19.434 1.408C17.86 1.34 17.39 1.322 13.315 1.322H12.315zM12 7.045c-2.73 0-4.955 2.225-4.955 4.955S9.27 16.955 12 16.955s4.955-2.225 4.955-4.955S14.73 7.045 12 7.045zm0 8.084c-1.728 0-3.129-1.4-3.129-3.129s1.4-3.129 3.129-3.129 3.129 1.4 3.129 3.129-1.4 3.129-3.129 3.129zM18.883 6.13a1.47 1.47 0 100-2.94 1.47 1.47 0 000 2.94z" clip-rule="evenodd" /></svg>
                    <span>@noxkuuart</span>
                </a>
            </div>
            <p class="text-stone-500 text-sm">&copy; <span id="year"></span> Noxkuu.com. All rights reserved.</p>
        </div>
    </footer>

    <!-- MODAL -->
    <div id="imageModal" class="fixed top-0 left-0 w-full h-full modal-bg items-center justify-center p-4 z-[100] hidden">
        <div class="relative w-full max-w-7xl h-full flex flex-col md:flex-row items-center justify-center gap-8">
            <div class="relative w-full md:w-2/3 h-full flex items-center justify-center">
                <button id="prevBtn" class="absolute left-0 text-stone-700 dark:text-stone-200 text-4xl p-2 rounded-full bg-white/50 dark:bg-black/30 hover:bg-white/80 dark:hover:bg-black/50 transition-colors">&#10094;</button>
                <img id="modalImage" src="" alt="Full-size artwork" class="max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl">
                <button id="nextBtn" class="absolute right-0 text-stone-700 dark:text-stone-200 text-4xl p-2 rounded-full bg-white/50 dark:bg-black/30 hover:bg-white/80 dark:hover:bg-black/50 transition-colors">&#10095;</button>
            </div>
            <div class="w-full md:w-1/3 h-auto md:h-full flex flex-col justify-center text-left p-4">
                <button id="closeModalBtn" class="absolute top-0 right-0 p-2 z-[110] rounded-full hover:bg-black/10 dark:hover:bg-white/10 transition-colors">
                    <span class="text-stone-800 dark:text-white text-5xl font-bold cursor-pointer leading-none">&times;</span>
                </button>
                <div id="lore-panel" class="bg-white dark:bg-stone-800/50 p-6 rounded-lg shadow-lg border border-themed h-full overflow-y-auto">
                    <h3 class="font-heading text-3xl text-stone-800 dark:text-white">Character Lore</h3>
                    <div id="lore-container" class="mt-4 text-stone-600 dark:text-stone-300 space-y-2 leading-relaxed"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const dom = {
                themeToggle: document.getElementById('theme-toggle'),
                homeLink: document.getElementById('homeLink'),
                mainContent: document.getElementById('main-content'),
                galleryPage: document.getElementById('gallery-page'),
                viewFullGalleryBtn: document.getElementById('view-full-gallery-btn'),
                recentGallery: document.getElementById('recent-gallery-container'),
                fullGallery: document.getElementById('full-gallery-container'),
                filterButtons: document.getElementById('filter-buttons'),
                modal: document.getElementById('imageModal'),
                closeModalBtn: document.getElementById('closeModalBtn'),
                modalImg: document.getElementById('modalImage'),
                prevBtn: document.getElementById('prevBtn'),
                nextBtn: document.getElementById('nextBtn'),
                loreContainer: document.getElementById('lore-container'),
                yearSpan: document.getElementById('year'),
            };

            const state = {
                allArtwork: [],
                categories: [],
                modalGallery: [],
                currentModalIndex: 0,
            };

            const config = {
                geminiApiKey: "AIzaSyAgl2kPBCxQJg4PVY9kwIPpl22dT8iFRC8"
            };
            
            // =================================================================
            // MANUAL ARTWORK DATA
            // =================================================================
            // To add new artwork:
            // 1. Upload your image to a hosting service (like your Azure Blob Storage).
            // 2. Copy the full, public URL of the uploaded image.
            // 3. Add a new object to this 'artworkData' array, following the format.
            //    - 'src': The full URL to the image.
            //    - 'alt': A description for screen readers (e.g., "Artwork of Superman").
            //    - 'category': Use lowercase: 'marvel', 'dc', 'star-wars', 'pokemon', 'original', etc.
            //    - 'flavorText': A short, specific description for the AI lore prompt.
            // 4. New artwork should be added to the TOP of the list to appear first.
            // =================================================================
            const artworkData = [
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/DC-CassandraCain.jpg', alt: 'Artwork of Cassandra Cain', category: 'dc', flavorText: 'Cassandra Cain as Batgirl' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/DC-Superman.jpg', alt: 'Artwork of Superman', category: 'dc', flavorText: 'Superman, the Man of Steel' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/Marvel-DareDevil.jpg', alt: 'Artwork of DareDevil', category: 'marvel', flavorText: 'Matt Murdock, the Daredevil of Hell\'s Kitchen' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/Marvel-JeanGrayPhoenix.jpg', alt: 'Artwork of Jean Gray Phoenix', category: 'marvel', flavorText: 'Jean Grey as the cosmic entity Dark Phoenix' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/Marvel-Moonknight.jpg', alt: 'Artwork of Moonknight', category: 'marvel', flavorText: 'Marc Spector, the avatar of the Egyptian moon god Khonshu' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/Marvel-Mystique.jpg', alt: 'Artwork of Mystique', category: 'marvel', flavorText: 'Mystique, the shape-shifting mutant' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/OC-SkaterDuck.png', alt: 'Artwork of Skater Duck', category: 'original', flavorText: '' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/Pokemon-Eevee.JPG', alt: 'Artwork of Eevee', category: 'pokemon', flavorText: 'Eevee, the Evolution Pok√©mon' },
                { src: 'https://noxkuuimages.blob.core.windows.net/artworks/StarWars-Jedi.jpg', alt: 'Artwork of Jedi', category: 'star-wars', flavorText: 'A Jedi Knight from the Star Wars Old Republic era' },
                // <-- Add new artwork objects here, above this line.
            ];

            // --- UI & Page Logic ---
            const applyTheme = (theme) => {
                const lightIcon = dom.themeToggle.querySelector('#theme-toggle-light-icon');
                const darkIcon = dom.themeToggle.querySelector('#theme-toggle-dark-icon');
                if (theme === 'dark') {
                    document.documentElement.classList.add('dark');
                    lightIcon.style.display = 'block';
                    darkIcon.style.display = 'none';
                } else {
                    document.documentElement.classList.remove('dark');
                    lightIcon.style.display = 'none';
                    darkIcon.style.display = 'block';
                }
            };
            
            const showPage = (page) => {
                dom.mainContent.style.display = page === 'main' ? 'block' : 'none';
                dom.galleryPage.style.display = page === 'gallery' ? 'block' : 'none';
                window.scrollTo(0, 0);
            };

            const openModal = (element, nodeList, artwork) => {
                state.modalGallery = nodeList;
                dom.modal.style.display = 'flex';
                dom.modalImg.src = element.src;
                state.currentModalIndex = state.modalGallery.findIndex(img => img.src === element.src);
                document.body.style.overflow = 'hidden';
                fetchAndDisplayLore(artwork);
            };

            const closeModal = () => {
                dom.modal.style.display = 'none';
                document.body.style.overflow = '';
            };

            const changeImage = (direction) => {
                state.currentModalIndex = (state.currentModalIndex + direction + state.modalGallery.length) % state.modalGallery.length;
                const newImgSrc = state.modalGallery[state.currentModalIndex].src;
                dom.modalImg.src = newImgSrc;
                const newArtworkData = state.allArtwork.find(art => art.src === newImgSrc);
                fetchAndDisplayLore(newArtworkData);
            };

            // --- Data Fetching & Rendering ---
            const populateGalleries = () => {
                dom.recentGallery.innerHTML = '';
                state.allArtwork.slice(0, 6).forEach(art => dom.recentGallery.appendChild(createGalleryItem(art)));
                dom.fullGallery.innerHTML = '';
                state.allArtwork.forEach(art => dom.fullGallery.appendChild(createGalleryItem(art)));
            };

            const createGalleryItem = (artwork) => {
                const img = document.createElement('img');
                img.src = artwork.src;
                img.alt = artwork.alt;
                img.className = 'rounded-lg border border-themed hover:border-violet-300 dark:hover:border-violet-500 transition-all duration-300 cursor-pointer w-full';
                img.onclick = () => openModal(img, Array.from(img.closest('.gallery-masonry').querySelectorAll('.gallery-item:not([style*="display: none"]) img')), artwork);
                const itemDiv = document.createElement('div');
                itemDiv.className = 'gallery-item';
                itemDiv.dataset.category = artwork.category;
                itemDiv.appendChild(img);
                return itemDiv;
            };

            const createFilterButtons = () => {
                dom.filterButtons.innerHTML = '';
                state.categories.forEach(cat => {
                    const button = document.createElement('button');
                    button.textContent = cat;
                    button.className = 'filter-btn px-4 py-2 text-sm md:text-base font-semibold rounded-lg transition-colors duration-200';
                    button.dataset.filter = cat.toLowerCase().replace(/\s+/g, '-');
                    if (cat === 'All') {
                        button.classList.add('bg-accent', 'text-white');
                    } else {
                        button.classList.add('bg-inactive-filter', 'hover-bg-inactive-filter');
                    }
                    dom.filterButtons.appendChild(button);
                });
            };

            const filterGallery = (filter) => {
                dom.fullGallery.querySelectorAll('.gallery-item').forEach(item => {
                    item.style.display = (filter === 'all' || item.dataset.category === filter) ? 'block' : 'none';
                });
            };

            async function getGeminiTextResponse(prompt) {
                if (!config.geminiApiKey || config.geminiApiKey === "PASTE_YOUR_GEMINI_API_KEY_HERE") {
                    return "API Key is missing. Please add it to the script.";
                }
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${config.geminiApiKey}`;
                const payload = { contents: [{ parts: [{ text: prompt }] }] };
                try {
                    const response = await fetch(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                    if (!response.ok) throw new Error(`API call failed with status: ${response.status}`);
                    const result = await response.json();
                    if (result.candidates && result.candidates[0]?.content?.parts[0]) {
                        return result.candidates[0].content.parts[0].text;
                    }
                    console.error('Invalid response structure:', result);
                    return "Could not retrieve lore at this time.";
                } catch (error) {
                    console.error('Error calling Gemini API:', error);
                    return "An error occurred while contacting the AI. Please try again later.";
                }
            }
            
            async function fetchAndDisplayLore(artwork) {
                if (artwork.category === 'original') {
                    dom.loreContainer.innerHTML = '<p class="font-body-alt text-xl">A unique creation by NoxKuu.</p>';
                    return;
                }
                dom.loreContainer.innerHTML = '<p class="animate-pulse font-body-alt text-xl">Fetching lore from the archives...</p>';
                const prompt = `Directly provide a brief, interesting lore snippet (under 80 words) for the following character: ${artwork.flavorText || artwork.alt}. Do not add any introductory phrases like "Certainly, here is the lore...". Just provide the lore itself. Focus on their origin or a key defining trait.`;
                const loreText = await getGeminiTextResponse(prompt);
                dom.loreContainer.innerHTML = `<p class="font-body-alt text-xl leading-relaxed">${loreText}</p>`;
            }
            
            function setupEventListeners() {
                dom.viewFullGalleryBtn.addEventListener('click', () => showPage('gallery'));
                dom.homeLink.addEventListener('click', (e) => { e.preventDefault(); showPage('main'); });

                dom.themeToggle.addEventListener('click', () => {
                    const newTheme = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
                    localStorage.setItem('theme', newTheme);
                    applyTheme(newTheme);
                });

                dom.filterButtons.addEventListener('click', (e) => {
                    if (e.target.classList.contains('filter-btn')) {
                        dom.filterButtons.querySelectorAll('.filter-btn').forEach(btn => {
                            btn.classList.remove('bg-accent', 'text-white');
                            btn.classList.add('bg-inactive-filter', 'hover-bg-inactive-filter');
                        });
                        e.target.classList.add('bg-accent', 'text-white');
                        e.target.classList.remove('bg-inactive-filter', 'hover-bg-inactive-filter');
                        filterGallery(e.target.dataset.filter);
                    }
                });
                
                dom.closeModalBtn.addEventListener('click', closeModal);
                dom.modal.addEventListener('click', (e) => { if (e.target === dom.modal) closeModal(); });
                dom.prevBtn.addEventListener('click', (e) => { e.stopPropagation(); changeImage(-1); });
                dom.nextBtn.addEventListener('click', (e) => { e.stopPropagation(); changeImage(1); });
                
                document.addEventListener('keydown', (e) => {
                    if (dom.modal.style.display === 'flex') {
                        if (e.key === 'Escape') closeModal();
                        if (e.key === 'ArrowLeft') changeImage(-1);
                        if (e.key === 'ArrowRight') changeImage(1);
                    }
                });
            }

            // --- Initializer ---
            function main() {
                dom.yearSpan.textContent = new Date().getFullYear();
                applyTheme(localStorage.getItem('theme') || 'light');
                
                state.allArtwork = artworkData; 
                state.allArtwork.reverse(); // Newest first
                const uniqueCategories = ['All', ...new Set(state.allArtwork.map(art => {
                    const cat = art.category.toLowerCase();
                    if (cat === 'dc') return 'DC';
                    return cat.charAt(0).toUpperCase() + cat.slice(1).replace(/-/g, ' ');
                }))];
                state.categories = uniqueCategories;
                
                if (state.allArtwork.length > 0) {
                    populateGalleries();
                    createFilterButtons();
                }
                setupEventListeners();
            }
            
            main();
        });
    </script>
</body>
</html>
